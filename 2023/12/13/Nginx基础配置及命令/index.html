<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  viewport-fit=cover" name="viewport" />
    <meta name="description" content="Nginxé…ç½®åŠå‘½ä»¤" />
    <meta name="hexo-theme-A4" content="v1.6.9" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Lau | Learning..</title>

    
        
            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/reset.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/markdown.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/fonts.css">
 
            <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
            
        
    
    
<link rel="stylesheet" href="/css/ui.css">
 
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>
    
    <style>
        :root {
            --waline-theme-color: #fdbb30; 
            --waline-color: #fdbb30; 
            --waline-border-color: #fdbb30; 
            --waline-white: #fdbb30; 
            --waline-bgcolor-light: #247aac;  
        }
        body {
            color: #fdbb30;
            background: #c96149;
        }
        .post-md code {
            background: black;
            color: white; 
        }
        .year-font-color {
            color: #fdbb30 !important;
        }
        .wl-card span.wl-nick {
            color: #fdbb30; 
        }
        .wl-card .wl-badge {
            border: 1px solid #fdbb30;
            color: #fdbb30; 
        }
        .wl-btn {
            border: 1px solid #fdbb30; 
            color:  #fdbb30;  
        }
        .wl-btn.primary {
            color: #247aac; 
        }
        .wl-header label {
            color: #fdbb30;
        }
        a {
            color: #fec591;
        }

        .post-md a {
            color: #fec591;
        }

        .nav li a {
            color: #fec591;
        }

        .archive-main a:link {
            color: #fec591;
        }
        .archive-main a:visited {
            color: #002d62; 
        }

        .archive li span {
            color: #fdbb30;
        }

        .post-main-title {
            color: #fdbb30;
        }

        .post-md h1,
        .post-md h2,
        .post-md h3,
        .post-md h4,
        .post-md h5,
        .post-md h6 {
            color: #fdbb30;
        }

        [data-waline] p {
            color: #fdbb30;
        }
        [data-waline] a {
            color: #fdbb30;
        } 
        .wl-sort li.active {
            color: #fdbb30;
        }

        .wl-card .wl-meta>span {
            background: #247aac;
        }

        .paper {
            background: #c96149;
        }

        .index-main {
            background: #fdfdfe;
        }

        .paper-main {
            background: #247aac;
        }

        .wl-panel {
            background: #247aac;
        }

        .archive li:nth-child(odd) {
            background: #247aac;
            ;
        }

        .archive li:nth-child(even) {
            background: #247aac;
        }

        .post-md>table tr:nth-child(odd) td {
            background: #247aac;
        }

        .post-md>table tr:nth-child(even) td {
            background: #247aac;
        }
    </style>

    <body>
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    
<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Lau</a> 
            <span class="description">Empty your mind. Be formless, shapeless, like water.</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
            
                <li><a href="/tags/">æ ‡ç­¾</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            Nginxé…ç½®åŠå‘½ä»¤
        </div>
      
    

    <div class="post-md">
        
            
        
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>é…ç½®æ–‡ä»¶nginx.confï¼Œä½¿ç”¨nginx -tæ£€æŸ¥æ–‡ä»¶ä½ç½®å’Œé…ç½®æ˜¯å¦æ­£ç¡®</p>
<pre><code># å…¨å±€å—
worker_processes 1;
events &#123;
    # æŒ‡å®šä½¿â½¤å“ªç§â½¹ç»œIOæ¨¡å‹ï¼Œåªèƒ½åœ¨eventså—ä¸­è¿›â¾é…ç½®
    # use epoll

    # æ¯ä¸ªworker processå…è®¸çš„æœ€â¼¤è¿æ¥æ•°
    worker_connections 1024;
&#125;
http &#123;
    # nginx å¯ä»¥ä½¿â½¤includeæŒ‡ä»¤å¼•â¼Šå…¶ä»–é…ç½®â½‚ä»¶
    include /etc/nginx/mime.types;
    # é»˜è®¤ç±»å‹ï¼Œå¦‚æœè¯·æ±‚çš„URLæ²¡æœ‰åŒ…å«â½‚ä»¶ç±»å‹ï¼Œä¼šä½¿â½¤é»˜è®¤ç±»å‹
    default_type application/octet-stream; # é»˜è®¤ç±»å‹
    # å¼€å¯â¾¼æ•ˆâ½‚ä»¶ä¼ è¾“æ¨¡å¼
    sendfile on;
    # è¿æ¥è¶…æ—¶æ—¶é—´
    keepalive_timeout 65;
    # access_log â½‡å¿—å­˜æ”¾è·¯å¾„å’Œç±»å‹
    # æ ¼å¼ä¸ºï¼š access_log &lt;path&gt; [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]];
    access_log /var/log/nginx/access.log main;
    # å®šä¹‰â½‡å¿—æ ¼å¼
    log_format main &#39;$remote_addr - $remote_user [$time_local]
                    &quot;$request&quot; &#39;&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;
                    &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;
    # è®¾ç½®sendfileæœ€â¼¤ä¼ è¾“â½šæ®µâ¼¤â¼©ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶
    # sendfile_max_chunk 1m;
    # æ¯ä¸ªè¿æ¥çš„è¯·æ±‚æ¬¡æ•°
    # keepalive_requests 100;
    # keepaliveè¶…æ—¶æ—¶é—´
    keepalive_timeout 65;
    # å¼€å¯gzipå‹ç¼©
    # gzip on;
    # å¼€å¯gzipå‹ç¼©çš„æœ€â¼©â½‚ä»¶â¼¤â¼©
    # gzip_min_length 1k;
    # gzipå‹ç¼©çº§åˆ«ï¼Œ 1-9ï¼Œçº§åˆ«è¶Šâ¾¼å‹ç¼©ç‡è¶Šâ¾¼ï¼Œä½†æ˜¯æ¶ˆè€—CPUèµ„æºä¹Ÿè¶Šå¤š
    # gzip_comp_level 2;
    # gzipå‹ç¼©â½‚ä»¶ç±»å‹
    # gzip_types text/plain application/javascript application/xjavascript text/css application/xml text/javascript application/x-httpdphp image/jpeg image/gif image/png;
    # upstreamæŒ‡ä»¤â½¤äºå®šä¹‰â¼€ç»„æœåŠ¡å™¨ï¼Œâ¼€èˆ¬â½¤æ¥é…ç½®åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
    upstream www.example.com &#123;
    # ip_hashæŒ‡ä»¤â½¤äºè®¾ç½®è´Ÿè½½å‡è¡¡çš„â½…å¼ï¼Œ ip_hashè¡¨ç¤ºä½¿â½¤å®¢æˆ·ç«¯çš„IPè¿›â¾hashï¼Œ
    è¿™æ ·å¯ä»¥ä¿è¯åŒâ¼€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚æ¯æ¬¡éƒ½ä¼šåˆ†é…åˆ°åŒâ¼€ä¸ªæœåŠ¡å™¨ï¼Œè§£å†³äº†sessionå…±äº«çš„é—®é¢˜
    ip_hash;
    # weight â½¤äºè®¾ç½®æƒé‡ï¼Œæƒé‡è¶Šâ¾¼è¢«åˆ†é…åˆ°çš„â¼ç‡è¶Šâ¼¤
    server 192.168.50.11:80 weight=3;
    server 192.168.50.12:80;
    server 192.168.50.13:80;
    &#125;
    server &#123;
        # ç›‘å¬IPå’Œç«¯â¼
        # listençš„æ ¼å¼ä¸ºï¼š
        # listen [ip]:port [default_server] [ssl] [http2] [spdy]
        [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number];
        # listenæŒ‡ä»¤â¾®å¸¸çµæ´»ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªIPå’Œç«¯â¼ï¼Œä¹Ÿå¯ä»¥ä½¿â½¤é€šé…ç¬¦
        # ä¸‹â¾¯æ˜¯â¼ä¸ªå®é™…çš„ä¾‹â¼¦ï¼š
        # listen 127.0.0.1:80; # ç›‘å¬æ¥â¾ƒ127.0.0.1çš„80ç«¯â¼çš„è¯·æ±‚
        # listen 80; # ç›‘å¬æ¥â¾ƒæ‰€æœ‰IPçš„80ç«¯â¼çš„è¯·æ±‚
        # listen *:80; # ç›‘å¬æ¥â¾ƒæ‰€æœ‰IPçš„80ç«¯â¼çš„è¯·æ±‚ï¼ŒåŒä¸Š
        # listen 127.0.0.1; # ç›‘å¬æ¥â¾ƒæ¥â¾ƒ127.0.0.1çš„80ç«¯â¼ï¼Œé»˜è®¤ç«¯â¼ä¸º80
        listen 80;
        # server_name â½¤æ¥æŒ‡å®šè™šæ‹Ÿä¸»æœºçš„åŸŸåï¼Œå¯ä»¥ä½¿â½¤ç²¾ç¡®åŒ¹é…ã€é€šé…ç¬¦åŒ¹é…å’Œæ­£åˆ™åŒ¹é…ç­‰
        â½…å¼
        # server_name example.org www.example.org; # ç²¾ç¡®åŒ¹é…
        # server_name *.example.org; # é€šé…ç¬¦åŒ¹é…
        # server_name ~^www\d+\.example\.net$; # æ­£åˆ™åŒ¹é…
        server_name localhost;
        # locationå—â½¤æ¥é…ç½®è¯·æ±‚çš„è·¯ç”±ï¼Œâ¼€ä¸ªserverå—å¯ä»¥åŒ…å«å¤šä¸ªlocationå—ï¼Œæ¯ä¸ª
        locationå—å°±æ˜¯â¼€ä¸ªè¯·æ±‚è·¯ç”±
        # locationå—çš„æ ¼å¼æ˜¯ï¼š
        # location [=|~|~*|^~] /uri/ &#123; ... &#125;
        # = è¡¨ç¤ºç²¾ç¡®åŒ¹é…ï¼Œåªæœ‰å®Œå…¨åŒ¹é…ä¸Šæ‰èƒ½â½£æ•ˆ# ~ è¡¨ç¤ºåŒºåˆ†â¼¤â¼©å†™çš„æ­£åˆ™åŒ¹é…
        # ~* è¡¨ç¤ºä¸åŒºåˆ†â¼¤â¼©å†™çš„æ­£åˆ™åŒ¹é…
        # ^~ è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ä¸å†åŒ¹é…å…¶ä»–location
        # /uri/ è¡¨ç¤ºè¯·æ±‚çš„URIï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼
        # &#123; ... &#125; è¡¨ç¤ºlocationå—çš„é…ç½®å†…å®¹
        location / &#123;
            # rootæŒ‡ä»¤â½¤äºæŒ‡å®šè¯·æ±‚çš„æ ¹â½¬å½•ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„
            root /usr/share/nginx/html; # æ ¹â½¬å½•
            # indexæŒ‡ä»¤â½¤äºæŒ‡å®šé»˜è®¤â½‚ä»¶ï¼Œå¦‚æœè¯·æ±‚çš„æ˜¯â½¬å½•ï¼Œåˆ™ä¼šåœ¨â½¬å½•ä¸‹æŸ¥æ‰¾é»˜è®¤â½‚ä»¶
            index index.html index.htm; # é»˜è®¤â½‚ä»¶
            &#125;
        # ä¸‹â¾¯æ˜¯â¼€äº›locationçš„ç¤ºä¾‹ï¼š
        location = / &#123; # ç²¾ç¡®åŒ¹é…è¯·æ±‚
            root /usr/share/nginx/html;
            index index.html index.htm;
            &#125;
        location ^~ /images/ &#123; # åŒ¹é…ä»¥/images/å¼€å¤´çš„è¯·æ±‚
            root /usr/share/nginx/html;
            &#125;
        location ~* \.(gif|jpg|jpeg)$ &#123; # åŒ¹é…ä»¥gifã€ jpgæˆ–è€…jpegç»“å°¾çš„è¯·æ±‚
            root /usr/share/nginx/html;
            &#125;
        location !~ \.(gif|jpg|jpeg)$ &#123; # ä¸åŒ¹é…ä»¥gifã€ jpgæˆ–è€…jpegç»“å°¾çš„è¯·æ±‚
            root /usr/share/nginx/html;
            &#125;
        location !~* \.(gif|jpg|jpeg)$ &#123; # ä¸åŒ¹é…ä»¥gifã€ jpgæˆ–è€…jpegç»“å°¾çš„è¯·æ±‚
            root /usr/share/nginx/html;
            &#125;
        # error_page â½¤äºæŒ‡å®šé”™è¯¯â»šâ¾¯ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§ä»â¾¼åˆ°ä½ä¾æ¬¡æŸ¥æ‰¾
        error_page 500 502 503 504 /50x.html; # é”™è¯¯â»šâ¾¯
        location = /50x.html &#123;
            root /usr/share/nginx/html;
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
<p>nginxå¸¸ç”¨å‘½ä»¤ï¼š</p>
<ul>
<li>nginx # å¯åŠ¨Nginx</li>
<li>nginx -c filename # æŒ‡å®šé…ç½®â½‚ä»¶</li>
<li>nginx -V # æŸ¥çœ‹Nginxçš„ç‰ˆæœ¬å’Œç¼–è¯‘å‚æ•°ç­‰ä¿¡æ¯</li>
<li>nginx -t # æ£€æŸ¥é…ç½®â½‚ä»¶æ˜¯å¦æ­£ç¡®ï¼Œä¹Ÿå¯â½¤æ¥å®šä½é…ç½®â½‚ä»¶çš„ä½ç½®</li>
<li>nginx -s quit # ä¼˜é›…åœâ½ŒNginx</li>
<li>nginx -s stop # å¿«é€Ÿåœâ½ŒNginx</li>
<li>nginx -s reload # é‡æ–°åŠ è½½é…ç½®â½‚ä»¶</li>
<li>nginx -s reopen # é‡æ–°æ‰“å¼€â½‡å¿—â½‚ä»¶</li>
</ul>

    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-12-13</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Limit Lau</span>
            
            
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E9%85%8D%E7%BD%AE/'>
                            é…ç½®
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    
        

     
</div>



                    
                    
                    <div class="footer">
    
        <span> 
            Â© 2019-2023 China 

            
                

            
        </span>
    
</div>
<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>Rage, rage against the dying of the lightğŸ­</span>
            
    
</div>


    
        
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/a11y-dark.min.css">

        
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlight.min.js"></script>

        
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlightjs-line-numbers.js"></script>

    


<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>
                </div>
            
    </body>
</html>